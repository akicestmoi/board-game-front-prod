{"ast":null,"code":"import _slicedToArray from\"D:/Code/prod/board-game-front-prod/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/* Base */import{useState}from'react';import{useNavigate,Link}from'react-router-dom';import axios from'axios';/* Authentication Context */import{useAuthContext}from'../../hooks/useAuthContext';import{doLogin}from'../../contexts/AuthContext';/* Bootstrap */import{Button,Form,Card,Container,Modal}from'react-bootstrap';/* Styling */import'./Login.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Login(){/* Declaring State Object and Constant variables */var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),usernameError=_useState6[0],setUsernameError=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),passwordError=_useState8[0],setPasswordError=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),generalError=_useState10[0],setGeneralError=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),showError=_useState12[0],setShowError=_useState12[1];var _useAuthContext=useAuthContext(),dispatch=_useAuthContext.dispatch;var url='http://localhost:8000/user/login';var navigate=useNavigate();/* Declaring Event handler */var handleSubmit=function handleSubmit(e){e.preventDefault();axios.post(url,{username:username,password:password}).then(function(res){console.log('Login successful!');console.log('Response:',res);dispatch(doLogin(username));sessionStorage.setItem(\"sessionName\",username);navigate('/');}).catch(function(err){setShowError(true);if(err.response){/* The request was made and the server responded with a status code that falls out of the range of 2xx */console.log(err.response.data.error);setUsernameError(err.response.data.error.username);setPasswordError(err.response.data.error.password);}else if(err.request){/* The request was made but no response was received */console.log(err.request);setGeneralError(err.request);}else{/* Something happened in setting up the request that triggered an Error */console.log(err.message);setGeneralError(err.request);}console.log(err.config);});};/* Render */return/*#__PURE__*/_jsxs(Container,{fluid:true,className:\"login_page\",children:[/*#__PURE__*/_jsxs(Card,{className:\"login_form_card\",children:[/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{className:\"login_form_title\",children:\"Login to your account\"}),/*#__PURE__*/_jsxs(Form,{className:\"login_form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"login_form_input\",children:[/*#__PURE__*/_jsx(Form.Label,{className:\"login_form_label\",children:\"Username:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Enter username\",onChange:function onChange(e){return setUsername(e.target.value);},value:username})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"login_form_input\",children:[/*#__PURE__*/_jsx(Form.Label,{className:\"login_form_label\",children:\"Password:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Enter password\",onChange:function onChange(e){return setPassword(e.target.value);},value:password})]}),/*#__PURE__*/_jsx(Button,{className:\"login_submit_button\",variant:\"primary\",type:\"submit\",children:\"Login\"})]})]}),/*#__PURE__*/_jsxs(Card.Footer,{className:\"login_card_footer\",children:[\" Don't have an account yet? \",/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Signup\"}),\" \"]})]}),/*#__PURE__*/_jsxs(Modal,{className:\"error_modal\",show:showError,onHide:function onHide(){return setShowError(false);},children:[/*#__PURE__*/_jsxs(Modal.Header,{children:[\"Error\",/*#__PURE__*/_jsx(\"button\",{className:\"error_modal_close\",onClick:function onClick(){return setShowError(false);},children:\"X\"})]}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsxs(_Fragment,{children:[generalError,\" \",generalError&&/*#__PURE__*/_jsx(\"br\",{}),usernameError&&\"Username: \",\" \",usernameError,\" \",usernameError&&/*#__PURE__*/_jsx(\"br\",{}),passwordError&&\"Password: \",\" \",passwordError]})})]})]});}","map":{"version":3,"names":["useState","useNavigate","Link","axios","useAuthContext","doLogin","Button","Form","Card","Container","Modal","Login","username","setUsername","password","setPassword","usernameError","setUsernameError","passwordError","setPasswordError","generalError","setGeneralError","showError","setShowError","dispatch","url","navigate","handleSubmit","e","preventDefault","post","then","res","console","log","sessionStorage","setItem","catch","err","response","data","error","request","message","config","target","value"],"sources":["D:/Code/prod/board-game-front-prod/src/pages/login/Login.tsx"],"sourcesContent":["/* Base */\r\nimport { useState } from 'react'\r\nimport { useNavigate, Link } from 'react-router-dom'\r\nimport axios from 'axios'\r\n\r\n/* Authentication Context */\r\nimport { useAuthContext } from '../../hooks/useAuthContext'\r\nimport { doLogin } from '../../contexts/AuthContext'\r\n\r\n/* Bootstrap */\r\nimport { Button, Form, Card, Container, Modal } from 'react-bootstrap'\r\n\r\n/* Styling */\r\nimport './Login.css'\r\n\r\n\r\nexport default function Login() {\r\n\r\n    /* Declaring State Object and Constant variables */\r\n    const [ username, setUsername ] = useState<string>('')\r\n    const [ password, setPassword ] = useState<string>('')\r\n    const [ usernameError, setUsernameError ] = useState<string | null>(null)\r\n    const [ passwordError, setPasswordError ] = useState<string | null>(null)\r\n    const [ generalError, setGeneralError ] = useState<string | null>(null)\r\n    const [ showError, setShowError ] = useState<boolean>(false)\r\n\r\n    const { dispatch } = useAuthContext()\r\n\r\n    const url = 'http://localhost:8000/user/login'\r\n\r\n    const navigate = useNavigate()\r\n\r\n\r\n    /* Declaring Event handler */\r\n    const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n\r\n        e.preventDefault()\r\n\r\n        axios.post(url, {username, password})\r\n            .then((res) => {\r\n\r\n                console.log('Login successful!')\r\n                console.log('Response:', res)\r\n\r\n                dispatch(doLogin(username))\r\n                sessionStorage.setItem(\"sessionName\", username)\r\n                navigate('/')\r\n\r\n            })\r\n            .catch((err) => {\r\n                setShowError(true)\r\n                if (err.response) {\r\n                    /* The request was made and the server responded with a status code that falls out of the range of 2xx */\r\n                    console.log(err.response.data.error)\r\n                    setUsernameError(err.response.data.error.username)\r\n                    setPasswordError(err.response.data.error.password)\r\n\r\n                } else if (err.request) {\r\n                    /* The request was made but no response was received */\r\n                    console.log(err.request)\r\n                    setGeneralError(err.request)\r\n\r\n                } else {\r\n                    /* Something happened in setting up the request that triggered an Error */\r\n                    console.log(err.message)\r\n                    setGeneralError(err.request)\r\n                }\r\n                console.log(err.config)\r\n            });\r\n    }\r\n\r\n    \r\n    /* Render */\r\n    return (\r\n        <Container fluid className=\"login_page\">\r\n\r\n        <Card className=\"login_form_card\">\r\n            <Card.Body>\r\n                <Card.Title className=\"login_form_title\">Login to your account</Card.Title>\r\n                    <Form className=\"login_form\" onSubmit={handleSubmit}>\r\n                        \r\n                        <Form.Group className=\"login_form_input\">\r\n                        <Form.Label className=\"login_form_label\">Username:</Form.Label>\r\n                            <Form.Control \r\n                                type=\"text\" \r\n                                placeholder='Enter username'\r\n                                onChange={(e) => setUsername(e.target.value)}\r\n                                value={username}\r\n                            />\r\n                        </Form.Group>\r\n                        \r\n                        <Form.Group className=\"login_form_input\">\r\n                        <Form.Label className=\"login_form_label\">Password:</Form.Label>\r\n                            <Form.Control \r\n                                type=\"password\" \r\n                                placeholder='Enter password'\r\n                                onChange={(e) => setPassword(e.target.value)}\r\n                                value={password}\r\n                            />\r\n                        </Form.Group>\r\n                        \r\n                        <Button className=\"login_submit_button\" variant='primary' type=\"submit\">Login</Button>\r\n\r\n                    </Form>\r\n                    </Card.Body>\r\n                <Card.Footer className=\"login_card_footer\"> Don't have an account yet? {<Link to=\"/signup\">Signup</Link>} </Card.Footer>\r\n            </Card>\r\n\r\n            <Modal className=\"error_modal\" show={showError} onHide={() => setShowError(false)}>\r\n                <Modal.Header>Error<button className=\"error_modal_close\" onClick={()=>setShowError(false)}>X</button></Modal.Header>\r\n                <Modal.Body>\r\n                    <>\r\n                        {generalError} { generalError && <br/> }\r\n                        { usernameError && \"Username: \" } {usernameError} { usernameError && <br/> }\r\n                        { passwordError && \"Password: \" } {passwordError}\r\n                    </>\r\n                </Modal.Body>\r\n            </Modal>\r\n        </Container>        \r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
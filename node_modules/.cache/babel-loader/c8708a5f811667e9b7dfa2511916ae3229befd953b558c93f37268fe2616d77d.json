{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nexport const useSignup = url => {\n  _s();\n  /* Declaring a User structure to match database format */\n\n  const [error, setError] = useState(null);\n  const [isPending, setIsPending] = useState(false);\n  const [data, setData] = useState();\n  const [options, setOptions] = useState({}); /* Special type for fetch Options */\n\n  /* Creating a fetchPostOption function that will create a specific POST Fetch option */\n  const fetchPostOption = dataToPost => {\n    setOptions({\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(dataToPost)\n    });\n  };\n\n  /* useEffect hook to trigger fetch */\n  useEffect(() => {\n    /* Creating a signup function to be called upon user signup */\n    const signup = async fetchOptions => {\n      setError(null);\n      setIsPending(true);\n      try {\n        const res = await fetch(url, fetchOptions);\n        const outputData = await res.json();\n        console.log(\"in useEffect\");\n        console.log(res.statusText);\n        console.log(res);\n        console.log('Output Data');\n        console.log(outputData);\n        console.log(outputData.error);\n        setError(prevState => {\n          return {\n            prevState,\n            ...outputData.error\n          };\n        });\n        console.log(error);\n        if (!res) {\n          setError(outputData.error);\n          console.log(error);\n          /*throw new Error(\"Ca marche pas\")*/\n        } else {\n          setData(outputData);\n          setError(null);\n          setIsPending(false);\n        }\n      } catch (err) {\n        console.log(\"Could not fetch data\");\n        console.log(err);\n        setIsPending(false);\n      }\n    };\n    signup(options);\n  }, [url, options]);\n  return {\n    fetchPostOption,\n    data,\n    isPending,\n    error\n  };\n};\n_s(useSignup, \"HsXEwok+YArEni1xV6s2R2ErTfw=\");","map":{"version":3,"names":["useState","useEffect","useSignup","url","error","setError","isPending","setIsPending","data","setData","options","setOptions","fetchPostOption","dataToPost","method","headers","body","JSON","stringify","signup","fetchOptions","res","fetch","outputData","json","console","log","statusText","prevState","err"],"sources":["D:/Code/board-game/ts_front/src/hooks/useSignup.tsx"],"sourcesContent":["import { useState, useEffect } from 'react'\r\n\r\nexport const useSignup = (url: RequestInfo) => {\r\n\r\n    /* Declaring a User structure to match database format */\r\n    interface User {\r\n        email: String,\r\n        username: String,\r\n        password: String,\r\n        is_logged_in: Boolean\r\n    }\r\n\r\n    const [error, setError] = useState(null)\r\n    const [isPending, setIsPending] = useState(false)\r\n    const [data, setData] = useState<User>()\r\n    const [options, setOptions] = useState<RequestInit>({}) /* Special type for fetch Options */\r\n\r\n\r\n    /* Creating a fetchPostOption function that will create a specific POST Fetch option */\r\n    const fetchPostOption = (dataToPost: User) => {\r\n        setOptions({\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify(dataToPost)\r\n        })\r\n    }\r\n\r\n\r\n    /* useEffect hook to trigger fetch */\r\n    useEffect(() => {\r\n\r\n        /* Creating a signup function to be called upon user signup */\r\n        const signup = async (fetchOptions: RequestInit) => {\r\n\r\n            setError(null)\r\n            setIsPending(true)\r\n        \r\n            try {\r\n                const res = await fetch(url, fetchOptions)\r\n                const outputData = await res.json()\r\n\r\n                console.log(\"in useEffect\")\r\n                console.log(res.statusText)\r\n                console.log(res)\r\n                console.log('Output Data')\r\n                console.log(outputData)\r\n                console.log(outputData.error)\r\n                setError((prevState) => {\r\n                    return { prevState, ...outputData.error }\r\n                })\r\n                console.log(error)\r\n\r\n                if (!res) {\r\n                    setError(outputData.error)\r\n                    console.log(error)\r\n                    /*throw new Error(\"Ca marche pas\")*/\r\n\r\n                } else {\r\n                    setData(outputData)\r\n                    setError(null)\r\n                    setIsPending(false)\r\n                }\r\n\r\n            } \r\n            catch (err: any) {\r\n                console.log(\"Could not fetch data\")\r\n                console.log(err)\r\n                setIsPending(false)\r\n            }\r\n        };\r\n\r\n        signup(options)\r\n\r\n    }, [url, options])\r\n\r\n    \r\n    return { fetchPostOption, data, isPending, error }\r\n\r\n}"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAE3C,OAAO,MAAMC,SAAS,GAAIC,GAAgB,IAAK;EAAA;EAE3C;;EAQA,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGL,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACM,SAAS,EAAEC,YAAY,CAAC,GAAGP,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACQ,IAAI,EAAEC,OAAO,CAAC,GAAGT,QAAQ,EAAQ;EACxC,MAAM,CAACU,OAAO,EAAEC,UAAU,CAAC,GAAGX,QAAQ,CAAc,CAAC,CAAC,CAAC,EAAC;;EAGxD;EACA,MAAMY,eAAe,GAAIC,UAAgB,IAAK;IAC1CF,UAAU,CAAC;MACPG,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACL,cAAc,EAAE;MACpB,CAAC;MACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACL,UAAU;IACnC,CAAC,CAAC;EACN,CAAC;;EAGD;EACAZ,SAAS,CAAC,MAAM;IAEZ;IACA,MAAMkB,MAAM,GAAG,MAAOC,YAAyB,IAAK;MAEhDf,QAAQ,CAAC,IAAI,CAAC;MACdE,YAAY,CAAC,IAAI,CAAC;MAElB,IAAI;QACA,MAAMc,GAAG,GAAG,MAAMC,KAAK,CAACnB,GAAG,EAAEiB,YAAY,CAAC;QAC1C,MAAMG,UAAU,GAAG,MAAMF,GAAG,CAACG,IAAI,EAAE;QAEnCC,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC;QAC3BD,OAAO,CAACC,GAAG,CAACL,GAAG,CAACM,UAAU,CAAC;QAC3BF,OAAO,CAACC,GAAG,CAACL,GAAG,CAAC;QAChBI,OAAO,CAACC,GAAG,CAAC,aAAa,CAAC;QAC1BD,OAAO,CAACC,GAAG,CAACH,UAAU,CAAC;QACvBE,OAAO,CAACC,GAAG,CAACH,UAAU,CAACnB,KAAK,CAAC;QAC7BC,QAAQ,CAAEuB,SAAS,IAAK;UACpB,OAAO;YAAEA,SAAS;YAAE,GAAGL,UAAU,CAACnB;UAAM,CAAC;QAC7C,CAAC,CAAC;QACFqB,OAAO,CAACC,GAAG,CAACtB,KAAK,CAAC;QAElB,IAAI,CAACiB,GAAG,EAAE;UACNhB,QAAQ,CAACkB,UAAU,CAACnB,KAAK,CAAC;UAC1BqB,OAAO,CAACC,GAAG,CAACtB,KAAK,CAAC;UAClB;QAEJ,CAAC,MAAM;UACHK,OAAO,CAACc,UAAU,CAAC;UACnBlB,QAAQ,CAAC,IAAI,CAAC;UACdE,YAAY,CAAC,KAAK,CAAC;QACvB;MAEJ,CAAC,CACD,OAAOsB,GAAQ,EAAE;QACbJ,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;QACnCD,OAAO,CAACC,GAAG,CAACG,GAAG,CAAC;QAChBtB,YAAY,CAAC,KAAK,CAAC;MACvB;IACJ,CAAC;IAEDY,MAAM,CAACT,OAAO,CAAC;EAEnB,CAAC,EAAE,CAACP,GAAG,EAAEO,OAAO,CAAC,CAAC;EAGlB,OAAO;IAAEE,eAAe;IAAEJ,IAAI;IAAEF,SAAS;IAAEF;EAAM,CAAC;AAEtD,CAAC;AAAA,GA9EYF,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}